.. _middleware-integration:

*******************************
B. Интеграция с IPTV Middleware
*******************************

Решение MicroPVR по-умолчанию поддерживается системой `Microimpuls IPTV/OTT Middleware Smarty <http://mi-smarty-docs.readthedocs.io/>`_.

Для интеграции MicroPVR со сторонней системой Middleware необходимо использовать :ref:`JSON-RPC API <jsonrpc-api>`.

Формат HTTP URL для доступа к записанному контенту на необходимую позицию времени: ::

    http://<host>:8080/ts?channel_id=<channel_id>&timestamp=<timestamp>&endless=<0|1>&priority=<priority>

Описание параметров URL:

- ``channel_id`` - уникальный идентификатор канала, соответствующий тому, который был передан при добавлении задачи на запись.
- ``timestamp`` - время в формате UNIX Timestamp, соответствующее времени начала передачи по EPG по UTC+0.
- ``endless`` - необязательный параметр (по умолчанию отключен), активирующий режим эмуляции "бесконечного" потока.
  Используется для устройств, которые обрывают воспроизведение архивной передачи по достижению момента конца файла
  (например, устройства Samsung и Android).
- ``priority`` - необязательный параметр, если явно указать приоритет, то micropvr отдаст запись с источника соответствующего приоритета.
