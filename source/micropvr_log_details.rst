.. _micropvr_log_list:

*********************************************
D. Список возможных кодов и сообщений в логах
*********************************************

.. _micropvr_log_doc_list:

D.1. Список возможных кодов и сообщений лога micropvr
=====================================================

Все сообщения имеют четырёхзначный код, причём первая цифра кода обозначает модуль:

- 1 - другие сообщения.
- 2 - сообщения API.
- 3 - сообщения СУБД.
- 4 - сообщения менеджера задач (TASK MANAGER).
- 5 - сообщения менеджера процессов записи (RECORDER MANAGER).
- 6 - сообщения менеджера файлов записей (RECORDS MANAGER).

Сообщения, имеющие формат x0xx относятся к процессу запуска MicroPVR.

+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|Код |Формат                                            |Описание                                          |Уровень |Пример                                            |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1000|MicroPVR Manager                                  |сообщение о начале запуска MicroPVR Manager       |INFO    |Wed Mar 15 14:37:03 2017 INFO INIT main[13521]:   |
|    |                                                  |                                                  |        |(1000) MicroPVR Manager                           |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1001|%module started                                   |сообщение о старте модуля %module                 |INFO    |Wed Mar 15 14:37:04 2017 INFO INIT main[13521]:   |
|    |                                                  |                                                  |        |(1001) TASKS MANAGER started                      |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1003|configuration loading failed, use defaults        |ошибка чтения конфигурации, будут использованы    |ERROR   |Wed Mar 15 14:40:00 2017 ERROR INIT main[21013]:  |
|    |                                                  |параметры по умолчанию                            |        |(1003) configuration loading failed, use defaults |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1004|configuration is loaded                           |конфигурация успешно прочитана и применена        |INFO    |Wed Mar 15 14:40:00 2017 INFO INIT main[21013]:   |
|    |                                                  |                                                  |        |(1004) configuration is loaded                    |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1005|objects not created                               |ошибка инициализации какого-либо из модулей       |CRITICAL|Wed Mar 15 14:41:00 2017 CRITICAL INIT            |
|    |                                                  |                                                  |        |StartRecordersManager[21013]: (1005) objects not  |
|    |                                                  |                                                  |        |created                                           |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1006|reading tasks                                     |начат процесс чтения задач из конфигурации        |INFO    |Wed Mar 15 14:37:04 2017 INFO INIT main[13521]:   |
|    |                                                  |                                                  |        |(1006) reading tasks                              |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|2000|binding methods                                   |cообщение о начале инициализации API              |INFO    |Wed Mar 15 14:40:01 2017 INFO API                 |
|    |                                                  |                                                  |        |StartTCPServer[21013]: (2000) binding methods     |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|2001|API init fail: %s                                 |ошибка запуска API                                |CRITICAL|Wed Mar 15 14:41:00 2017 CRITICAL INIT            |
|    |                                                  |                                                  |        |StartTCPServer[21013]: (2001) API init fail: port |
|    |                                                  |                                                  |        |binding fail                                      |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|2002|bind ok                                           |инициализация API завершена                       |INFO    |Wed Mar 15 14:40:01 2017 INFO API                 |
|    |                                                  |                                                  |        |StartTCPServer[21013]: (2002) bind ok             |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|3000|id generator init failure                         |ошибка запуска генератора идентификатора задач    |CRITICAL|Thu Mar 16 16:55:52 2017 CRITICAL GENERIC DB      |
|    |                                                  |                                                  |        |DBTaskNumberGenerator[13321]: (3000) id generator |
|    |                                                  |                                                  |        |init failure                                      |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|3001|check if column %col exists in %table             |сообщения проверки соответствия табиц БД текущей  |INFO    |Wed Mar 15 14:40:00 2017 INFO GENERIC DB          |
|    |                                                  |версии                                            |        |CheckColumnExists[21013]: check if column         |
|    |                                                  |                                                  |        |channelName exists in TasksTMTable                |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|3002|migrate, %                                        |сообщение о миграции схемы БД                     |WARNING |Thu Mar 16 16:55:52 2017 WARNING GENERIC DB       |
|    |                                                  |                                                  |        |Migrate_version_1_5_0b[13321]: (3002) migrate,    |
|    |                                                  |                                                  |        |set duration = stopTimestamp - startTimestamp in  |
|    |                                                  |                                                  |        |tasks                                             |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4000|load all tasks to queue                           |начата загрузка задач из БД                       |INFO    |Wed Mar 15 14:40:00 2017 INFO TASKS MANAGER       |
|    |                                                  |                                                  |        |LoadAll[21013]: (4000) load all tasks to queue    |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5000|load recorder from DB                             |загрузка информации о записи                      |INFO    |Wed Mar 15 14:40:01 2017 INFO RECORDERS MANAGER   |
|    |                                                  |                                                  |        |FillWatchlistFromDB[21013]: (5000) load recorder  |
|    |                                                  |                                                  |        |from DB: task_id = 992283, channel_id = 1,        |
|    |                                                  |                                                  |        |channel_name = channel_1                          |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5001|can't start task, postpone                        |невозможно начать запись сейчас, задача отложена  |WARNING |Wed Mar 15 14:40:01 2017 WARNING RECORDERS        |
|    |                                                  |                                                  |        |MANAGER FillWatchlistFromDB[21013]: (5001) can't  |
|    |                                                  |                                                  |        |start task, postpone: task_id = 992283,           |
|    |                                                  |                                                  |        |channel_id = 1, channel_name = channel_1          |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5002|task was not started                              |информация о записи была в БД, но нет информации  |WARNING |Wed Mar 15 14:40:01 2017 WARNING RECORDERS        |
|    |                                                  |о процессе recorder; будет запущен новый процесс  |        |MANAGER FillWatchlistFromDB[21013]: (5002) task   |
|    |                                                  |recorder                                          |        |was not started: task_id = 992283, channel_id =   |
|    |                                                  |                                                  |        |1, channel_name = channel_1                       |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6000|record added to watchlist from DB                 |файл записи добавлен в список наблюдения          |INFO    |Wed Mar 15 14:40:01 2017 INFO RECORDS MANAGER     |
|    |                                                  |                                                  |        |TryAddToWatchlistFromDB[21013]: (6000) record     |
|    |                                                  |                                                  |        |added to watchlist from DB: task_id = 992283,     |
|    |                                                  |                                                  |        |channel_id = 1, channel_name = channel_1.         |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6001|can't add record to watchlist: %s                 |ошибка добавления файла в список наблюдения       |WARNING |Wed Mar 15 14:40:01 2017 WARNING RECORDS MANAGER  |
|    |                                                  |                                                  |        |TryAddToWatchlistFromDB[21013]: (6001) can't add  |
|    |                                                  |                                                  |        |record to watchlist: task with ID 992283 does not |
|    |                                                  |                                                  |        |exist in DB.                                      |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1200|configuration has been loaded                     |окончание чтения конфигурации                     |INFO    |Wed Mar 15 14:40:00 2017 INFO CONFIG CONTROL      |
|    |                                                  |                                                  |        |LoadConfigs[21013]: (1200) configuration has been |
|    |                                                  |                                                  |        |loaded                                            |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1201|error read config file: %s                        |ошибка чтения файла конфигурации                  |ERROR   |Wed Mar 15 14:40:00 2017 ERROR CONFIG CONTROL     |
|    |                                                  |                                                  |        |ReadConfig[21013]: (1201) file                    |
|    |                                                  |                                                  |        |/etc/micropvr/micropvr.conf was not found         |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1202|configuration parsing failed: %s                  |ошибка разбора JSON-объекта в файле конфигурации  |ERROR   |Wed Mar 15 14:40:00 2017 ERROR CONFIG CONTROL     |
|    |                                                  |                                                  |        |ReadConfig[21013]: (1202) configuration parsing   |
|    |                                                  |                                                  |        |failed: config root is non-object                 |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1203|configuration parsing completed                   |разбор JSON-объекта конфигурации успешно завершён |INFO    |Wed Mar 15 14:40:00 2017 INFO INIT Check[21013]:  |
|    |                                                  |                                                  |        |(1203) configuration parsing completed            |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1204|backup config, file name: %file                   |произодится резервное копирование конфигурации из |DEBUG   |Wed Mar 15 14:40:00 2017 DEBUG CONFIG CONTROL     |
|    |                                                  |файла %file                                       |        |BackupConfig[21013]: (1204) backup config, file   |
|    |                                                  |                                                  |        |name: /etc/micropvr/micropvr.conf                 |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1205|try to backup config, backup file name: %file     |произодится резервное копирование конфигурации в  |INFO    |Wed Mar 15 14:40:00 2017 INFO CONFIG CONTROL      |
|    |                                                  |файл %file                                        |        |BackupConfig[21013]: (1205) try to backup config, |
|    |                                                  |                                                  |        |backup file name:                                 |
|    |                                                  |                                                  |        |/etc/micropvr/micropvr.conf-2016-12-19-16:37:49   |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1206|backup error: %s                                  |ошибка создания резевной копии                    |WARNING |Wed Mar 15 14:40:00 2017 WARNING CONFIG CONTROL   |
|    |                                                  |                                                  |        |BackupConfig[21013]: (1206) backup error: can't   |
|    |                                                  |                                                  |        |write file                                        |
|    |                                                  |                                                  |        |/etc/micropvr/micropvr.conf-2016-12-19-16:37:49   |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1207|config write error: %s                            |ошибка записи файла конфигурации                  |WARNING |Wed Mar 15 14:40:00 2017 WARNING CONFIG CONTROL   |
|    |                                                  |                                                  |        |WriteConfig[21013]: (1207) config write error:    |
|    |                                                  |                                                  |        |can't write file /etc/micropvr/micropvr.conf      |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|2100|API %method: %params                              |вызов метода %method с параметрами %params        |DEBUG   |Wed Mar 15 15:52:23 2017 DEBUG API                |
|    |                                                  |                                                  |        |CancelTask[21013]: (2100) API cancel_task:        |
|    |                                                  |                                                  |        |channel_id = 110, record_location =               |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|2101|API %method error (%code): %s                     |ошибка вызова метода %method, код ошибки %code    |WARNING |Wed Mar 15 15:52:23 2017 INFO API                 |
|    |                                                  |                                                  |        |CancelTask[21013]: (2101) API cancel_task fail    |
|    |                                                  |                                                  |        |(101): empty 'params' object                      |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|2102|API %method result: %s                            |результат вызова метода                           |DEBUG   |Wed Mar 15 15:52:23 2017 INFO API                 |
|    |                                                  |                                                  |        |CancelTask[21013]: (2102) API cancel_task fail    |
|    |                                                  |                                                  |        |(101): empty 'params' object                      |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|2103|incorrect %param: %i                              |сообщение проверки параметров метода              |WARNING |Wed Mar 15 15:52:23 2017 INFO API                 |
|    |                                                  |create_new_task о некорректном параметре          |        |CreateNewTask[21013]: (2103) incorrect            |
|    |                                                  |                                                  |        |channel_id: -1                                    |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|2104|missed parameter: %param                          |сообщение проверки параметров метода              |WARNING |Wed Mar 15 15:52:23 2017 INFO API                 |
|    |                                                  |create_new_task о пропущенном обязательном        |        |CreateNewTask[21013]: (2104) missed parameter:    |
|    |                                                  |параметре                                         |        |channel_id                                        |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|3100|%s                                                |ошибка выполнения запроса                         |ERROR   |Thu Mar 16 16:55:52 2017 ERROR GENERIC DB         |
|    |                                                  |                                                  |        |FillList[13321]: (3100) error when reading from DB|
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|3101|%s                                                |запрос к БД                                       |EXTENDED|Thu Mar 16 16:55:52 2017 EXTENDED GENERIC DB      |
|    |                                                  |                                                  |        |SendQuery[13321]: (3101) UPDATE TasksTMTable SET  |
|    |                                                  |                                                  |        |taskStatus=11 WHERE taskID=1006750                |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|3102|DB are empty                                      |нет записей в БД (при запросе контента)           |WARNING |Thu Mar 16 16:55:52 2017 WARNING GENERIC DB       |
|    |                                                  |                                                  |        |GetFileOffset[13321]: (3102) DB are empty         |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|3103|incorrect task in DB                              |задача не имеет идентификатора или некорректна    |ERROR   |Thu Mar 16 16:55:52 2017 WARNING GENERIC DB       |
|    |                                                  |                                                  |        |GetFileOffset[13321]: (3103) DB are empty         |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|3104|attempt write already present task with file_name |в БД уже присутствует запись о recorder с таким   |WARNING |Thu Mar 16 16:55:52 2017 WARNING GENERIC DB       |
|    |= %file                                           |именем файла                                      |        |NoDuplicationCheck[13321]: (3104) attempt write   |
|    |                                                  |                                                  |        |already present task with file_name =             |
|    |                                                  |                                                  |        |/tmp/pvr/ch_63/, file_location =                  |
|    |                                                  |                                                  |        |/tmp/pvr/ch_63/ch_id-63_time-1489461902_task_id-96|
|    |                                                  |                                                  |        |2733.ts                                           |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|3105|cancel task write task_id = %ID initialize        |попытка записи некорректной задачи, например если |ERROR   |Thu Mar 16 16:55:52 2017 ERROR GENERIC DB         |
|    |incorrect                                         |время начала записи больше, чем время её окончания|        |WriteTask[13321]: (3105) cancel task write        |
|    |                                                  |                                                  |        |task_id = 962733 initialize incorrect             |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4100|task execution started: task_id = %ID             |новая задача, идентификатор %ID                   |INFO    |Tue Mar 14 06:25:17 2017 INFO TASKS MANAGER       |
|    |                                                  |                                                  |        |MainThread[18527]: (4100) task execution started: |
|    |                                                  |                                                  |        |task_id = 962679                                  |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4101|task is being postponed: task_id = %ID            |выполнение задачи с идентификатором %ID отложено  |WARNING |Wed Mar 15 15:43:03 2017 WARNING TASKS MANAGER    |
|    |                                                  |                                                  |        |PostponeTask[21013]: (4101) task is being         |
|    |                                                  |                                                  |        |postponed: task_id = 993388                       |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4102|postponing has failed: task_id = %ID, channel_id  |задача не будет отложена из-за ошибки, возможно,  |ERROR   |Wed Mar 15 15:43:03 2017 ERROR TASKS MANAGER      |
|    |= %channel                                        |требуется ручной перезапуск                       |        |PostponeTask[21013]: task is being postponed:     |
|    |                                                  |                                                  |        |(4102) task_id = 993388, channel_id = 1           |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4103|try to repeat task: task_id = %ID, channel_name = |начат перезапуск периодической задачи             |INFO    |Wed Mar 15 06:25:03 2017 INFO TASKS MANAGER       |
|    |%name, channel_id = %channel                      |                                                  |        |RepeatTask[18527]: (4103) try to repeat task:     |
|    |                                                  |                                                  |        |task_id = 985130, channel_name = name, channel_id |
|    |                                                  |                                                  |        |= 65                                              |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4104|repeating has failed: task_id = %ID               |ошибка перезапуска периодической задачи,          |ERROR   |Wed Mar 15 06:25:03 2017 ERROR TASKS MANAGER      |
|    |                                                  |возможно, требуется ручной перезапуск             |        |RepeatTask[18527]: (4104) repeating has failed:   |
|    |                                                  |                                                  |        |task_id = 985130, channel_name = name, channel_id |
|    |                                                  |                                                  |        |= 65                                              |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4105|task completed: task_id = %ID, channel_name =     |выполнение задачи завершено                       |INFO    |Tue Mar 14 06:26:01 2017 INFO TASKS MANAGER       |
|    |%name, channel_id = %channel                      |                                                  |        |FinalizeTask[18527]: (4105) task completed:       |
|    |                                                  |                                                  |        |task_id = 962585, channel_name = name, channel_id |
|    |                                                  |                                                  |        |= 2                                               |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4106|task repeated, skip                               |попытка запуска задачи, которая уже была          |WARNING |Wed Mar 15 15:44:10 2017 INFO TASKS MANAGER       |
|    |                                                  |перезапущена; возможно, длительность записи       |        |ExecuteTask[21013]: (4106) task repeated, skip:   |
|    |                                                  |слишком маленькая                                 |        |channel_id: 87, channel_name: name, location:     |
|    |                                                  |                                                  |        |/tmp/pvr/ch_87, task_id: 993525                   |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4107|task is not new, skip                             |попытка запуска задачи, которая не является новой |WARNING |Wed Mar 15 15:44:10 2017 INFO TASKS MANAGER       |
|    |                                                  |                                                  |        |ExecuteTask[21013]: (4107) task is not new, skip: |
|    |                                                  |                                                  |        |channel_id: 87, channel_name: name, location:     |
|    |                                                  |                                                  |        |/tmp/pvr/ch_87, task_id: 993525                   |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4108|execute task                                      |начато выполнение задачи                          |INFO    |Wed Mar 15 14:40:01 2017 INFO TASKS MANAGER       |
|    |                                                  |                                                  |        |ExecuteTask[21013]: (4108) execute task:          |
|    |                                                  |                                                  |        |channel_id: 9, channel_name: name, location:      |
|    |                                                  |                                                  |        |/tmp/pvr/ch_9, task_id: 992849.                   |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4109|null cancel request skipped                       |попытка выполнить пустой запрос на отмену задачи  |WARNING |Wed Mar 15 15:49:43 2017 WARNING TASKS MANAGER    |
|    |                                                  |                                                  |        |CancelTasksByMask[21013]: (4109) null cancel      |
|    |                                                  |                                                  |        |request skipped                                   |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4110|cancel task with ID %ID                           |отмена задачи с идентификатором %ID               |INFO    |Wed Mar 15 15:49:43 2017 INFO TASKS MANAGER       |
|    |                                                  |                                                  |        |CancelTasksByMask[21013]: (4110) cancel task with |
|    |                                                  |                                                  |        |ID 992849                                         |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4111|cancel tasks and stop record for channel_id       |отмена всех задач на запись канала %channel в     |INFO    |Wed Mar 15 15:49:43 2017 INFO TASKS MANAGER       |
|    |%channel and location %loc                        |директорию %loc                                   |        |CancelTasksByMask[21013]: (4111) cancel tasks and |
|    |                                                  |                                                  |        |stop record for channel_id 1 and location         |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4112|generate new task                                 |генерация новой задачи для периодических задач    |INFO    |Tue Mar 14 06:25:03 2017 INFO TASKS MANAGER       |
|    |                                                  |                                                  |        |GenerateNewTask[18527]: (4112) generate new task: |
|    |                                                  |                                                  |        |task_id = 962735, channel_id = 65, channel_name = |
|    |                                                  |                                                  |        |name, start_timestamp = 1489461903,               |
|    |                                                  |                                                  |        |stop_timestamp = 1489462329, real duration is 426 |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4113|delete task from storage: task_id = %ID           |удаление задачи из БД                             |INFO    |Tue Mar 14 06:26:01 2017 INFO TASKS MANAGER       |
|    |                                                  |                                                  |        |DeleteTaskFromStorageByID[18527]: (4113) delete   |
|    |                                                  |                                                  |        |task from storage: task_id = 962585               |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4114|new task add                                      |добавление задачи в БД                            |INFO    |Tue Mar 14 06:25:03 2017 INFO TASKS MANAGER       |
|    |                                                  |                                                  |        |AddTaskIntoStorage[18527]: (4114) new task add:   |
|    |                                                  |                                                  |        |task_id = 962735, channel_id = 65, channel_name = |
|    |                                                  |                                                  |        |name, start_timestamp = 1489461903,               |
|    |                                                  |                                                  |        |stop_timestamp = 1489462329, real duration is 426 |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4115|generate postponed task                           |генерация отложенной задачи                       |WARNING |Wed Mar 15 15:43:02 2017 WARNING TASKS MANAGER    |
|    |                                                  |                                                  |        |GeneratePostponedTask[21013]: (4115) generate     |
|    |                                                  |                                                  |        |postponed task: task_id = 993498, channel_id =    |
|    |                                                  |                                                  |        |20, channel_name = name, start_timestamp =        |
|    |                                                  |                                                  |        |1489581842, stop_timestamp = 1489581843, real     |
|    |                                                  |                                                  |        |duration is 1                                     |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4116|can't generate postponed task                     |ошибка генерация отложенной задачи: время начала  |WARNING |Wed Mar 15 15:43:03 2017 WARNING TASKS MANAGER    |
|    |                                                  |записи больше и равно времени её остановки        |        |GeneratePostponedTask[21013]: (4116) can't        |
|    |                                                  |                                                  |        |generate postponed task: task_id = 993499,        |
|    |                                                  |                                                  |        |channel_id = 21, channel_name = name,             |
|    |                                                  |                                                  |        |start_timestamp = 1489581843, stop_timestamp =    |
|    |                                                  |                                                  |        |1489581843, real duration is 0                    |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|4117|get tasks list                                    |запрос списка задач                               |DEBUG   |Wed Mar 15 15:43:03 2017 DEBUG TASKS MANAGER      |
|    |                                                  |                                                  |        |GetTasksList[21013]: (4117) get tasks list        |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5100|can't create folder %loc, task %ID will be        |ошибка создания директории %loc                   |ERROR   |Tue Mar 14 06:25:03 2017 ERROR RECORDERS MANAGER  |
|    |postponed                                         |                                                  |        |MainThread[18527]: (5100) can't create folder     |
|    |                                                  |                                                  |        |/tmp/pvr/ch_63/, task 12314 will be postponed     |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5101|starting record: task_id = %ID, channel_id =      |начат запуск записи                               |INFO    |Tue Mar 14 06:25:03 2017 INFO RECORDERS MANAGER   |
|    |%channel                                          |                                                  |        |MainThread[18527]: (5101) starting record:        |
|    |                                                  |                                                  |        |task_id = 962733, channel_id = 63                 |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5102|can't cancel record: %s                           |ошибка отмены записи                              |WARNING |Tue Mar 14 06:25:03 2017 WARNING RECORDERS        |
|    |                                                  |                                                  |        |MANAGER StopRecordersByMask[18527]: (5102) can't  |
|    |                                                  |                                                  |        |cancel record: no task with ID 962733             |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5103|record canceled                                   |запись остановлена, процесс recorder завершён     |INFO    |Wed Mar 15 15:49:43 2017 INFO RECORDERS MANAGER   |
|    |                                                  |                                                  |        |StopRecordersByMask[21013]: (5103) record         |
|    |                                                  |                                                  |        |canceled: task_id = 993428, channel_id = 1,       |
|    |                                                  |                                                  |        |record_location = /tmp/pvr/ch_1                   |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5104|canceling record: channel_id = %channel,          |остановка всех процессов recorder для канала      |INFO    |Wed Mar 15 15:49:43 2017 INFO RECORDERS MANAGER   |
|    |record_location = %loc                            |%channel и директории %loc, если %loc пуст - для  |        |StopRecordersByMask[21013]: (5104) canceling      |
|    |                                                  |всех директорий                                   |        |record: channel_id = 1, record_location =         |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5105|kill recorder with pid %pid                       |завершение процесса                               |INFO    |Tue Mar 14 06:26:01 2017 INFO RECORDERS MANAGER   |
|    |                                                  |                                                  |        |StopRecorder[18527]: (5105) kill recorder with    |
|    |                                                  |                                                  |        |pid 26796                                         |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5106|can't kill PID %pid: %s                           |ошибка завершения процесса                        |CRITICAL|Tue Mar 14 06:26:01 2017 CRITICAL RECORDERS       |
|    |                                                  |                                                  |        |MANAGER StopRecorder[18527]: (5106) can't kill    |
|    |                                                  |                                                  |        |PID 1390: process does not have permission        |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5107|recorder with pid %pid still alive, use -9        |завершение процесса с поомощью SIGKILL            |WARNING |Tue Mar 14 06:26:01 2017 WARNING RECORDERS        |
|    |                                                  |                                                  |        |MANAGER StopRecorder[18527]: (5107) recorder with |
|    |                                                  |                                                  |        |pid 26796 still alive, use -9                     |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5109|fork failed                                       |ошибка вызова vfork()                             |CRITICAL|Tue Mar 14 06:26:01 2017 WARNING RECORDERS        |
|    |                                                  |                                                  |        |MANAGER StartRecorder[18527]: (5109) fork failed  |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5110|recorder is starting: run cmd: %s                 |начат запуск процесса recorder                    |DEBUG   |Tue Mar 14 06:25:03 2017 DEBUG RECORDERS MANAGER  |
|    |                                                  |                                                  |        |StartRecorder[12264]: (5110) recorder is          |
|    |                                                  |                                                  |        |starting: run cmd: fake_recorder -f               |
|    |                                                  |                                                  |        |"/tmp/pvr/ch_63/ch_id-63_time-1489461902_task_id-9|
|    |                                                  |                                                  |        |62733.ts" -i "udp://1.1.1.1" -t 430 -p            |
|    |                                                  |                                                  |        |"/var/run/micropvr/recorder_ch63_962733.pid" -l   |
|    |                                                  |                                                  |        |"/var/log/micropvr/recorder.log" >/dev/null       |
|    |                                                  |                                                  |        |2>/dev/null </dev/null &                          |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5111|recorder started: task_id = %ID                   |recorder успешно запущен                          |INFO    |Tue Mar 14 06:25:03 2017 INFO RECORDERS MANAGER   |
|    |                                                  |                                                  |        |CheckRecorders[18527]: (5111) recorder started:   |
|    |                                                  |                                                  |        |task_id = 962729, channel_id = 59, channel_name = |
|    |                                                  |                                                  |        |name                                              |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5112|failed to start recorder, postpone: task_id = %ID |recorder не был запущен до истечения таймаута,    |ERROR   |Wed Mar 15 15:42:40 2017 ERROR RECORDERS MANAGER  |
|    |                                                  |задача перезапущена                               |        |CheckRecorders[21013]: (5112) failed to start     |
|    |                                                  |                                                  |        |recorder, postpone: task_id = 993427, channel_id  |
|    |                                                  |                                                  |        |= 100, channel_name = name                        |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5113|recorder is dead, restarting: task_id = %ID       |recorder неожиданно завершился и будет запущен    |WARNING |Wed Mar 15 15:42:31 2017 WARNING RECORDERS        |
|    |                                                  |заново, задача не перезапущена                    |        |MANAGER CheckRecorders[21013]: (5113) recorder is |
|    |                                                  |                                                  |        |dead, restarting: task_id = 993427, channel_id =  |
|    |                                                  |                                                  |        |100, channel_name = name                          |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5114|record completed: task_id = %ID                   |запись завершена                                  |INFO    |Tue Mar 14 06:26:01 2017 INFO RECORDERS MANAGER   |
|    |                                                  |                                                  |        |CheckRecorders[18527]: (5114) record completed:   |
|    |                                                  |                                                  |        |task_id = 962585, channel_id = 2, channel_name =  |
|    |                                                  |                                                  |        |name                                              |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5115|creating locaton %loc                             |создание директории %loc                          |DEBUG   |Tue Mar 14 06:26:01 2017 DEBUG RECORDERS MANAGER  |
|    |                                                  |                                                  |        |CreateFolderIfNotExist[18527]: (5115) creating    |
|    |                                                  |                                                  |        |locaton /tmp/pvr/ch_63/                           |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5116|failed to make dir %loc: %s                       |ошибка создания директории %loc                   |ERROR   |Tue Mar 14 06:26:01 2017 ERROR RECORDERS MANAGER  |
|    |                                                  |                                                  |        |CreateFolderIfNotExist[18527]: (5116) failed to   |
|    |                                                  |                                                  |        |make dir /tmp/pvr/ch_63/: No such file or         |
|    |                                                  |                                                  |        |directory                                         |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|5117|get recorders list                                |получение списка активных процессов recorder      |DEBUG   |Tue Mar 14 06:26:01 2017 DEBUG RECORDERS MANAGER  |
|    |                                                  |                                                  |        |GetRecordersList[18527]: (5117) get recorders list|
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6100|can't remove record: %s                           |ошибка удаления записи                            |WARNING |Wed Mar 15 14:38:41 2017 WARNING RECORDS MANAGER  |
|    |                                                  |                                                  |        |RemoveOutdatedRecordFromStorage[18527]: (6100)    |
|    |                                                  |                                                  |        |file was removed, but record still in DB: can't   |
|    |                                                  |                                                  |        |remove record: no task with ID 990548             |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6101|file was removed, but record still in DB: %file   |файл %file удалён, но запись в БД удалена не была |WARNING |Wed Mar 15 14:38:41 2017 WARNING RECORDS MANAGER  |
|    |                                                  |                                                  |        |RemoveOutdatedRecordFromStorage[18527]: (6101)    |
|    |                                                  |                                                  |        |file was removed, but record still in DB:         |
|    |                                                  |                                                  |        |/tmp/pvr/ch_47/ch_id-47_time-1489568816_task_id-99|
|    |                                                  |                                                  |        |0548.ts                                           |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6102|remove record %file                               |запись удалена                                    |INFO    |Wed Mar 15 14:38:41 2017 INFO RECORDS MANAGER     |
|    |                                                  |                                                  |        |RemoveOutdatedRecordFromStorage[18527]: (6102)    |
|    |                                                  |                                                  |        |remove record                                     |
|    |                                                  |                                                  |        |/tmp/pvr/ch_47/ch_id-47_time-1489568816_task_id-99|
|    |                                                  |                                                  |        |0548.ts                                           |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6103|record in watchlist already: task_id = %ID        |попытка повторного добавления файла в список      |WARNING |Tue Mar 14 06:25:03 2017 WARNING RECORDS MANAGER  |
|    |                                                  |наблюдения                                        |        |AddToWatchlist[18527]: (6103) record in watchlist |
|    |                                                  |                                                  |        |already: task_id = 962735                         |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6104|record added to watchlist: task_id = %ID          |запись добавлена в список наблюдения              |INFO    |Tue Mar 14 06:25:03 2017 INFO RECORDS MANAGER     |
|    |                                                  |                                                  |        |AddToWatchlist[18527]: record added to watchlist: |
|    |                                                  |                                                  |        |(6104) task_id = 962735, channel_id = 65          |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6105|record removed from watch list: task_id = %ID,    |файл удалён из списка наблюдения из-за завершения |INFO    |Tue Mar 14 06:26:01 2017 INFO RECORDS MANAGER     |
|    |channel_id = %channel                             |или отмены записи                                 |        |RemoveRecordFromWatchList[18527]: (6105) record   |
|    |                                                  |                                                  |        |removed from watch list: task_id = 962585,        |
|    |                                                  |                                                  |        |channel_id = 2                                    |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6106|can't add to storage: task_id = %ID, channel_id = |ошибка добавления файла в БД                      |WARNING |Tue Mar 14 06:26:01 2017 WARNING RECORDS MANAGER  |
|    |%channel                                          |                                                  |        |AddToStorage[18527]: (6106) can't add to storage: |
|    |                                                  |                                                  |        |task_id = 962585, channel_id = 2                  |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6107|try to allocate in %loc, available space = %n     |попытка резервирования места в %loc               |INFO    |Tue Mar 14 06:26:01 2017 INFO RECORDS MANAGER     |
|    |bytes                                             |                                                  |        |TryToAddTaskToStorage[18527]: (6107) try to       |
|    |                                                  |                                                  |        |allocate in /, available space = 400938810038     |
|    |                                                  |                                                  |        |bytes                                             |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6108|no free space in %loc, task postponed             |в %loc недостаточно свободного места для          |WARNING |Tue Mar 14 06:26:01 2017 INFO RECORDS MANAGER     |
|    |                                                  |резервирования файла, выполнение задачи отложено  |        |TryToAddTaskToStorage[18527]: (6108) no free      |
|    |                                                  |                                                  |        |space in /, task postponed: task_id: 19693,       |
|    |                                                  |                                                  |        |channel_id: 2, critical space level: 1800000000,  |
|    |                                                  |                                                  |        |available space: 1902124086                       |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6109|%loc, free space: %n, real free space: %n,        |сообщения мониторинга свободного доскового        |DEBUG   |Wed Mar 15 14:38:40 2017 DEBUG RECORDS MANAGER    |
|    |reserved: %n                                      |пространства в точке монтирования %loc; free      |        |LogFreeSpace[18527]: (6109) / - free space:       |
|    |                                                  |space - количество доступного места, reserved -   |        |410186887168, real free space: 410186887168,      |
|    |                                                  |количество зарезервированного места, real free    |        |reserved: 0                                       |
|    |                                                  |space - фактическое количество свободного         |        |                                                  |
|    |                                                  |пространства на диске                             |        |                                                  |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6110|%loc, real free space: %n                         |сообщения мониторинга свободного дискового        |DEBUG   |Wed Mar 15 14:35:00 2017 DEBUG RECORDS MANAGER    |
|    |                                                  |пространства в точке монтирования %loc при        |        |LogFreeSpace[18527]: (6110) / - real free space:  |
|    |                                                  |recorder_check_free_space = false                 |        |410186887168                                      |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6111|reserve %n bytes in %loc, %m bytes left           |было зарезервировано %n байт в точке монтирования |INFO    |Wed Mar 15 14:40:01 2017 INFO RECORDS MANAGER     |
|    |                                                  |%loc                                              |        |ReserveSpace[21013]: (6111) reserve 5242880000    |
|    |                                                  |                                                  |        |bytes in /, 404935340032 bytes left               |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6112|mountpoint for %loc not found                     |точка монтирования не найдена                     |ERROR   |Wed Mar 15 14:40:01 2017 ERROR RECORDS MANAGER    |
|    |                                                  |                                                  |        |AddMountpoint[21013]: (6112) mountpoint for / not |
|    |                                                  |                                                  |        |found                                             |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6113|new mountpoint %loc added, free space = %n bytes  |добавлена новая точка монтирования                |INFO    |Wed Mar 15 14:40:01 2017 INFO RECORDS MANAGER     |
|    |                                                  |                                                  |        |AddMountpoint[21013]: (6113) new mountpoint /     |
|    |                                                  |                                                  |        |added, free space = 410178220032 bytes.           |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6114|file size check: %file, %n bytes                  |сообщения мониторинга размера файлов из списка    |DEBUG   |Wed Mar 15 14:38:40 2017 DEBUG RECORDS MANAGER    |
|    |                                                  |наблюдения                                        |        |CheckWritingFilesSizes[18527]: (6114) file size   |
|    |                                                  |                                                  |        |check: ch_id-97_time-1489577821_task_id-992897, 0 |
|    |                                                  |                                                  |        |bytes                                             |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6115|try to remove something outdated in mount point   |попытка немедленного удаления устаревшего файла   |INFO    |Wed Mar 15 14:40:01 2017 INFO RECORDS MANAGER     |
|    |%loc                                              |из-за нехватки места на диске                     |        |RemoveOutdatedRecordsOnMount[21013]: (6115) try   |
|    |                                                  |                                                  |        |to remove something outdated in mount point /     |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6116|no outdated file was found in %loc                |нет устаревших файлов в директории %loc           |INFO    |Wed Mar 15 14:40:01 2017 INFO RECORDS MANAGER     |
|    |                                                  |                                                  |        |RemoveOutdatedRecordsOnMount[21013]: (6116) no    |
|    |                                                  |                                                  |        |outdated file was found in /                      |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6117|remove records with channel ID: %channel and max  |удаление всех файлов с ID %channel и временем     |INFO    |Wed Mar 15 14:40:01 2017 INFO RECORDS MANAGER     |
|    |start timestamp: %ts                              |запуска не старше %ts                             |        |RemoveRecords[21013]: (6117) remove records with  |
|    |                                                  |                                                  |        |channel ID: 2 and max start timestamp: 1489012032 |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6118|file is broken: %file                             |в запрошенный момент времени запись в файл %file  |WARNING |Wed Mar 15 14:40:01 2017 WARNING RECORDS MANAGER  |
|    |                                                  |не велась по неизвестным причинам, будет выбран   |        |GetOffsetForFile[21013]: (6118) file is broken:   |
|    |                                                  |другой файл                                       |        |/tmp/pvr/ch_47/ch_id-47_time-1489568816_task_id-99|
|    |                                                  |                                                  |        |0548.ts                                           |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6119|can't add record to watchlist: %s                 |ошибка добавления записи в список наблюдения      |WARNING |Wed Mar 15 14:40:01 2017 WARNING RECORDS MANAGER  |
|    |                                                  |                                                  |        |TryAddToWatchlistFromDB[21013]: (6119) can't add  |
|    |                                                  |                                                  |        |record to watchlist: task with ID 1942 already in |
|    |                                                  |                                                  |        |watchlist                                         |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6120|get mountpoint list                               |запрос списка точек монтирования                  |DEBUG   |Wed Mar 15 14:40:01 2017 DEBUG RECORDS MANAGER    |
|    |                                                  |                                                  |        |GetMountpointList[21013]: (6120) get mountpoint   |
|    |                                                  |                                                  |        |list                                              |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6121|get records                                       |запрос списка файлов записей                      |DEBUG   |Wed Mar 15 14:40:01 2017 DEBUG RECORDS MANAGER    |
|    |                                                  |                                                  |        |GetRecords[21013]: (6121) get records             |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|6122|get oldest start timestamp                        |запрос времени начала старейшей записи из тех,    |DEBUG   |Wed Mar 15 14:40:01 2017 DEBUG RECORDS MANAGER    |
|    |                                                  |информация о которых есть в БД                    |        |GetOldestTimestamp[21013]: (6122) get oldest      |
|    |                                                  |                                                  |        |start timestamp                                   |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1100|send task: from = %module, to = %module, task_id  |пересылка сообщений между модулями                |EXTENDED|Thu Mar 16 17:31:02 2017 EXTENDED MODULE          |
|    |= %id, channel_id = %channel                      |                                                  |        |SendTask[13321]: (1100) send task: from =         |
|    |                                                  |                                                  |        |RecordersManager, to = RecordsManager, task_id =  |
|    |                                                  |                                                  |        |1007113, channel_id = 100                         |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1101|%sig received                                     |процессом micropvr получен сигнал ОС              |WARNING |Thu Mar 16 16:28:23 2017 WARNING DEINIT           |
|    |                                                  |                                                  |        |SignalHandler[31491]: (1101) SIGTERM received.    |
|    |                                                  |                                                  |        |Stop and deinit all threads                       |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1300|set period: %n seconds                            |изменён период лога состояния                     |DEBUG   |Wed Mar 15 14:38:57 2017 DEBUG STATE LOGGER       |
|    |                                                  |                                                  |        |SetTime[19158]: (1300) set period: 0 seconds.     |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1301|logger start                                      |запуск лога состояния                             |INFO    |Wed Mar 15 14:40:01 2017 INFO STATE LOGGER        |
|    |                                                  |                                                  |        |StartStop[21013]: (1301) logger start             |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1302|logger stop                                       |завершение лога состояния                         |INFO    |Wed Mar 15 14:40:00 2017 INFO STATE LOGGER        |
|    |                                                  |                                                  |        |StartStop[21013]: (1302) logger stop              |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1303|log state                                         |запись лога состояния                             |DEBUG   |Wed Mar 15 14:40:01 2017 DEBUG STATE LOGGER       |
|    |                                                  |                                                  |        |Log[21013]: (1303) log state                      |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1304|logger unlocked                                   |лог состояния разблокирован                       |DEBUG   |Wed Mar 15 14:40:01 2017 DEBUG STATE LOGGER       |
|    |                                                  |                                                  |        |Log[21013]: (1304) logger unlocked                |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1400|popen error: %s                                   |ошибка вызова popen()                             |CRITICAL|Wed Mar 15 14:40:01 2017 CRITICAL UTILS           |
|    |                                                  |                                                  |        |GetCpuLA1[21013]: (1400) popen error: No such     |
|    |                                                  |                                                  |        |file or directory                                 |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1401|mount point name is too long                      |слишком длинное имя точки монтирования            |ERROR   |Wed Mar 15 14:40:01 2017 ERROR UTILS              |
|    |                                                  |                                                  |        |GetMountpointForFolder[21013]: (1401) mount point |
|    |                                                  |                                                  |        |name is too long                                  |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1402|location %loc not found. Please, check storage    |не найдена точка монтирования для директории %loc |WARNING |Wed Mar 15 14:40:01 2017 WARNING UTILS            |
|    |                                                  |                                                  |        |GetMountpointForFolder[21013]: (1402) location    |
|    |                                                  |                                                  |        |/tmp/pvr/ch_47/ not found. Please, check storage  |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1403|can't delete file %file: %s                       |ошибка удаления файла                             |WARNING |Wed Mar 15 14:39:01 2017 WARNING RECORDS MANAGER  |
|    |                                                  |                                                  |        |DeleteFile[21013]: (1403) can't delete file       |
|    |                                                  |                                                  |        |/tmp/pvr/ch_60/ch_id-60_time-1489568821_task_id-99|
|    |                                                  |                                                  |        |0561.ts: file is busy                             |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|1404|file %file was deleted                            |файл %file удалён                                 |INFO    |Wed Mar 15 14:40:01 2017 INFO RECORDS MANAGER     |
|    |                                                  |                                                  |        |DeleteFile[21013]: (1404) file                    |
|    |                                                  |                                                  |        |/tmp/pvr/ch_60/ch_id-60_time-1489568821_task_id-99|
|    |                                                  |                                                  |        |0561.ts was deleted                               |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+

.. _recorder_log_doc_list:

D.2. Список возможных кодов и сообщений лога recorder
=====================================================

+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|Код |Формат                                            |Описание                                          |Уровень |Пример                                            |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9000|creating control thread fault                     |Ошибка создания потока мониторинга, процесс       |CRITICAL|Tue Mar 21 09:30:01 2017 CRITICAL Init[19967]:    |
|    |                                                  |recorder будет завершён                           |        |(9000) creating control thread fault              |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9001|recorder object is not created                    |Ошибка инициализации recorder, процесс будет      |CRITICAL|Tue Mar 21 09:35:10 2017 CRITICAL Init[20404]:    |
|    |                                                  |завершён                                          |        |(9001) recorder object is not created             |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9002|source ip: %ip, port: %port                       |Будет использован источник с IP %ip и сетевым     |INFO    |Tue Mar 21 09:35:10 2017 INFO                     |
|    |                                                  |портом %port                                      |        |ParseInputAddr[23421]: (9002) source ip:          |
|    |                                                  |                                                  |        |239.10.1.79, port: 5000                           |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9003|source (multicast) ip: %ip, port: %port           |Будет использован мультикаст-источник с IP %ip и  |INFO    |Tue Mar 21 06:21:27 2017 INFO                     |
|    |                                                  |сетевым портом %port                              |        |ParseInputAddr[14805]: (9003) source (multicast)  |
|    |                                                  |                                                  |        |ip: 239.10.1.500, port: 5000                      |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9004|invalid url: %s                                   |Некорректный адрес источника                      |ERROR   |Tue Mar 21 05:42:54 2017 ERROR                    |
|    |                                                  |                                                  |        |ParseInputAddr[381]: (9004) invalid url:          |
|    |                                                  |                                                  |        |udp://1.1.1.1                                     |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9005|-p parameter is missed                            |Пропущен параметр имени файла для записи PID, PID |ERROR   |Tue Mar 21 10:01:20 2017 ERROR                    |
|    |                                                  |не будет записан, возможна некорректная работа    |        |WritePidToFile[22896]: (9005) -p parameter is     |
|    |                                                  |MicroPVR                                          |        |missed, PID won't be written                      |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9006|recording is starting                             |Инициализация записи                              |DEBUG   |Tue Mar 21 06:21:27 2017 INFO                     |
|    |                                                  |                                                  |        |StartRecording[14805]: (9006) recording is        |
|    |                                                  |                                                  |        |starting on 239.10.1.500:5000                     |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9007|socket() error: %s                                |Ошибка создания сокета, recorder будет завершён   |ERROR   |Tue Mar 21 09:28:01 2017 INFO                     |
|    |                                                  |                                                  |        |StartRecording[20178]: (9007) socket() error:     |
|    |                                                  |                                                  |        |Invalid argument                                  |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9008|can't set socket option %opt: %s                  |Ошибка задания опции сокета, recorder будет       |ERROR   |Tue Mar 21 06:22:32 2017 ERROR                    |
|    |                                                  |завершён                                          |        |StartRecording[16102]: (9008) can't set socket    |
|    |                                                  |                                                  |        |option IP_ADD_MEMBERSHIP: Invalid argument        |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9009|bind() error: %s                                  |Ошибка инициализации сокета, recorder будет       |ERROR   |Tue Mar 21 09:30:47 2017 ERROR                    |
|    |                                                  |завершён                                          |        |StartRecording[18043]: (9009) bind() error:       |
|    |                                                  |                                                  |        |Cannot assign requested address                   |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9010|can not write stream to %file, terminate          |Ошибка записи видеопотока в файл %file            |ERROR   |Tue Mar 21 09:28:58 2017 ERROR Recorder[15827]:   |
|    |                                                  |                                                  |        |(9010) can not write stream to                    |
|    |                                                  |                                                  |        |/tmp/pvr/ch_8/ch_id-8_time-1490075921_task_id-1030|
|    |                                                  |                                                  |        |528.ts, terminate                                 |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9011|can not write PID to %s, terminate                |Ошибка записи ID процесса в файл %file            |ERROR   |Tue Mar 21 09:27:42 2017 ERROR                    |
|    |                                                  |                                                  |        |WritePidToFile[14288]: (9011) can not write PID   |
|    |                                                  |                                                  |        |to /var/run/recorder, terminate                   |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9012|recording has been started on %url                |Начата запись с источника %url                    |INFO    |Tue Mar 21 05:58:42 2017 DEBUG                    |
|    |                                                  |                                                  |        |StartRecording[19592]: (9012) recording has been  |
|    |                                                  |                                                  |        |started on 239.10.1.153:5000                      |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9013|recording has been stopped on %url                |Запись с источника %url завершена                 |INFO    |Tue Mar 21 09:33:41 2017 INFO                     |
|    |                                                  |                                                  |        |StartRecording[21557]: (9013) recording has been  |
|    |                                                  |                                                  |        |stopped on 239.10.1.79:5000                       |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9014|error closing output file                         |Ошибка закрытия файлового дескриптора             |ERROR   |Tue Mar 21 09:30:03 2017 ERROR ~Recorder[20213]:  |
|    |                                                  |                                                  |        |(9014) error closing output file                  |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9015|error removing PID file %s                        |Ошибка закрытия файлового дескриптора             |ERROR   |Tue Mar 21 09:34:35 2017 ERROR ~Recorder[22404]:  |
|    |                                                  |                                                  |        |(9015) error removing PID file /tmp/pid           |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9016|recorder shutdown on %url                         |Процесс recorder завершён                         |DEBUG   |Tue Mar 21 07:50:42 2017 DEBUG ~Recorder[25938]:  |
|    |                                                  |                                                  |        |(9016) recorder shutdown on                       |
|    |                                                  |                                                  |        |udp://@239.10.1.500:5000                          |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9018|shutdown timeout is reached, process will be      |Завершение процесса длится слишком долго,         |WARNING |Tue Mar 21 09:12:40 2017 WARNING                  |
|    |crashed                                           |recorder будет завершён немедленно                |        |TerminateHandler[21016]: (9018) shutdown timeout  |
|    |                                                  |                                                  |        |is reached, process will be crashed               |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
|9020|%sig received                                     |Процессом получен сигнал                          |INFO    |Tue Mar 21 06:00:00 2017 INFO                     |
|    |                                                  |                                                  |        |TerminateHandler[11536]: (9020) SIGTERM received, |
|    |                                                  |                                                  |        |shutdown                                          |
+----+--------------------------------------------------+--------------------------------------------------+--------+--------------------------------------------------+
